<html>
  <head>
    <link rel="stylesheet" href="desktopsms_style.css" type="text/css" />
    <script src="jquery-1.6.1.min.js"></script>
    <script src="sprintf.js"></script>
    <script src="client.js"></script>
    <script src="dsmsScript.js"></script>
    <script>
      var repeater = window.setInterval(function(){getNShowTxts();}, 5000);
      function addReplyBox(index, number)
      {
          newTxts = 0;
          window.clearInterval(repeater);
          repeater = 0;
          var xclone = $('.send-template').clone();
          var str = '.threadBox.'+ index;
        xclone.find('input.number').attr('id',"number").attr('value',number).hide();
          xclone.find('input.msgBox').attr('id',"msgBox");
          $(str).append(xclone.show().addClass('temp'));
          $('.replyLink').hide();
      }

      function sendText()
      {
          var number = document.getElementById('number').value;
          var message = document.getElementById('msgBox').value;
          if(message)
          {
            desksms.sendMessage(message, number);
            getNShowTxts();
            repeater = window.setInterval(function(){getNShowTxts(repeater);}, 20000);
          }
          $('.temp').remove();
          $('.replyLink').show();
      }

      function cancelSend()
      {
          $('.temp').remove();
          $('.replyLink').show();
          getNShowTxts()
          repeater = window.setInterval(function(){getNShowTxts(repeater);}, 20000);
      }
    </script>
  </head>
  <body>
    <div class="containContent" id="content">
        DeskSMS
        <div id="messages" style="display:none"></div>
        <div id="count" style="display:none">0</div>
        <br /><br />
        <div id="txtStreamFrame">
          <div class="containContent scroll" id="txtStream">
              <div class="thread-template" style="display:none;">
                  <p>
                    <strong>Number/Name</strong>
                    <br />
                    <em>X Y's Ago</em>
                  </p>
              </div>

              <div class="message-template" style="display:none;">
                  <strong>Message Sender</strong><span>Message</span>
              </div>

              <div class="send-template" style="display:none;">
                <br />
                <form>
                  <input class="number" type="text" value ="" />
                  <input class="msgBox" type="text" value="" />
                  <br />
                  <input type="button" value="Reply" onClick="sendText();"/>
                  <input type="button" value="Cancel" onClick="cancelSend();" />
                </form>
              </div>
          </div>
        </div>
    </div>
  </body>
</html>